<div class="edit-shipment-modal">
    
  <button type="button" *ngIf="shipment.status!=null" (click)="changeStatus(shipment)" [ngStyle]="{'border-color':statusList[shipment.status].color}" mat-button class="status-button">
    <div [ngStyle]="{'background-color':statusList[shipment.status].color}" class="bullet-point"></div>

    {{statusList[shipment.status].text}}
    <div  class="inc-button spinner-button"></div> 
    <div  class="dec-button spinner-button"></div>
  
  </button>
  
  <h2>ערוך הזמנה קיימת


  </h2>

  <!-- <div class="example-loading-shade"
    *ngIf="isLoadingResults">
  <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
  </div> -->
  <mat-divider></mat-divider>
  <mat-dialog-content>

    <form [formGroup]="shipmentForm" (ngSubmit)="onFormSubmit()">
    
      <mat-grid-list cols="3" rowHeight="80" [gutterSize]="'25px'">
         
        <mat-grid-tile colspan="1">
          <mat-form-field floatLabel="always" class="example-full-width">
            <mat-label>שם מלא</mat-label> 
            <input  matInput placeholder="שם מלא" formControlName="customer_name"  >
            <mat-error>
              <span *ngIf="!shipmentForm.get('customer_name').valid && shipmentForm.get('customer_name').touched">יש למלא שם מלא</span>
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
          <mat-form-field floatLabel="always" class="example-full-width">
              <mat-label>אימייל</mat-label> 
              <input  matInput placeholder="אימייל" formControlName="customer_email"  >
              <mat-error>
                <span *ngIf="!shipmentForm.get('customer_email').valid && shipmentForm.get('customer_email').touched">יש למלא אימייל</span>
              </mat-error>
            </mat-form-field>
        </mat-grid-tile> 
        
        <mat-grid-tile >
          <mat-form-field floatLabel="always" class="example-full-width">
            <mat-label>סכום</mat-label>
            <input  type="number" class="price-input" min="0" matInput placeholder="סכום" formControlName="sum"  >
            <span class="currency-span" [ngStyle]="{'right':((shipmentForm.get('sum').value.toString().length)*10+5)+'px' }" *ngIf="shipmentForm.get('sum').value" >₪</span>
            <!-- <div  class="inc-button spinner-button"></div>
            <div  class="dec-button spinner-button"></div> -->
            <mat-error>
              <span *ngIf="!shipmentForm.get('sum').valid && shipmentForm.get('sum').touched">יש למלא סכום</span>
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
          <mat-form-field floatLabel="always" class="example-full-width">
            <mat-label>כתובת למשלוח</mat-label> 
            <input  matInput placeholder="כתובת למשלוח" formControlName="customer_address"  >
            <mat-error>
              <span *ngIf="!shipmentForm.get('customer_address').valid && shipmentForm.get('customer_address').touched">יש למלא כתובת למשלוח</span>
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
          <mat-form-field floatLabel="always" class="example-full-width">
            <mat-label>עיר</mat-label> 
            <input  matInput placeholder="עיר" formControlName="customer_city"  >
            <mat-error>
              <span *ngIf="!shipmentForm.get('customer_city').valid && shipmentForm.get('customer_city').touched">יש למלא עיר</span>
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile colspan="1">
          <mat-form-field floatLabel="always" class="example-full-width">
            <mat-label>סוג המשלוח</mat-label> 
            <mat-select formControlName="delivery_type_id"> <!--formControlName="category"-->
              <mat-option *ngFor="let delivery_type of deliveryTypes" [value]="delivery_type.id">
                {{delivery_type.type}}
              </mat-option>
            </mat-select> 
            <mat-error>
              <span *ngIf="!shipmentForm.get('delivery_type_id').valid && shipmentForm.get('delivery_type_id').touched">יש למלא את סוג המשלוח</span>
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
      
    
     
    </mat-grid-list>
    <mat-grid-list *ngIf="orderDetails.controls.length>0" cols="8" rowHeight="40px" class="order-details-grid" >
      <ng-container >
         <mat-grid-tile class="order-details-product" colspan="5">פירוט ההזמנה</mat-grid-tile>
         <mat-grid-tile  colspan="1">כמות</mat-grid-tile>
         <mat-grid-tile colspan="2" >סה"כ</mat-grid-tile>
     </ng-container>
     <ng-container  formArrayName="order_details">
         <ng-container *ngFor="let item of orderDetails.controls; let i = index" [formGroupName]="i">
         <mat-grid-tile class="order-details-product order-details-cell" colspan="5">
           
                {{orderDetails.at(i).get('name').value.toString()}}
     
     
         </mat-grid-tile>
         <mat-grid-tile class="order-details-cell" colspan="1">
     {{orderDetails.at(i).get('quantity').value.toString()}}
        
     
         </mat-grid-tile>
  
  
         <mat-grid-tile class="order-details-cost order-details-cell" colspan="2">
     {{orderDetails.at(i).get('cost').value.toString()}}
     <span  *ngIf="orderDetails.at(i).get('cost').value">₪</span>
         
  
      </mat-grid-tile>
         
     </ng-container>
     </ng-container>
     
     
   
     </mat-grid-list>


<mat-divider class="mat-divider-bottom"></mat-divider> 
<button mat-button type="submit" [disabled]="!shipmentForm.valid" class="save-item-button save-item-button-primary edit-item-button" >
שמור

</button>
<button mat-button type="button" (click)="openDeleteConfirmModal()" class="save-item-button remove-item-button " >
  הסר הזמנה

</button>
</form>
</mat-dialog-content>

</div>

